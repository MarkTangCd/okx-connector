"use strict";var e=require("@web3-react/abstract-connector");function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function t(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,n){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,n,t){return(a=i()?Reflect.construct.bind():function(e,n,t){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(e,o));return t&&r(i,t.prototype),i}).apply(null,arguments)}function c(e){var n="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,o(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}function h(e){return e.hasOwnProperty("result")?e.result:e}require("tiny-warning"),"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var s=function(e){function n(){var n;return(n=e.call(this)||this).name=n.constructor.name,n.message="No Ethereum provider was found on window.bitkeep.",n}return t(n,e),n}(c(Error)),w=function(e){function n(){var n;return(n=e.call(this)||this).name=n.constructor.name,n.message="The user rejected the request.",n}return t(n,e),n}(c(Error)),d=function(e){function o(n){var t;return(t=e.call(this,n)||this).handleNetworkChanged=t.handleNetworkChanged.bind(u(t)),t.handleChainChanged=t.handleChainChanged.bind(u(t)),t.handleAccountsChanged=t.handleAccountsChanged.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t}t(o,e);var r=o.prototype;return r.handleChainChanged=function(e){this.emitUpdate({chainId:e,provider:window.okxwallet})},r.handleAccountsChanged=function(e){0===e.length?this.emitDeactivate():this.emitUpdate({account:e[0]})},r.handleClose=function(e,n){this.emitDeactivate()},r.handleNetworkChanged=function(e){this.emitUpdate({chainId:e,provider:window.okxwallet})},r.activate=function(){try{var e,t=function(t){if(o)return t;function r(){return n({provider:window.okxwallet},e?{account:e}:{})}var i=function(){if(!e)return Promise.resolve(window.okxwallet.enable().then((function(e){return e&&h(e)[0]}))).then((function(n){e=n}))}();return i&&i.then?i.then(r):r()},o=!1;if(!window.okxwallet)throw new s;window.okxwallet.on&&(window.okxwallet.on("chainChanged",this.handleChainChanged),window.okxwallet.on("accountsChanged",this.handleAccountsChanged),window.okxwallet.on("close",this.handleClose),window.okxwallet.on("networkChanged",this.handleNetworkChanged));var r=l((function(){return Promise.resolve(window.okxwallet.send("eth_requestAccounts").then((function(e){return h(e)[0]}))).then((function(n){e=n}))}),(function(e){if(4001===e.code)throw new w}));return Promise.resolve(r&&r.then?r.then(t):t(r))}catch(e){return Promise.reject(e)}},r.getProvider=function(){try{return Promise.resolve(window.okxwallet)}catch(e){return Promise.reject(e)}},r.getChainId=function(){try{var e,n=function(){function n(){if(!e)try{e=h(window.okxwallet.send({method:"net_version"}))}catch(e){}return e||(e=window.okxwallet.isDapper?h(window.okxwallet.cachedResults.net_version):window.okxwallet.chainId||window.okxwallet.netVersion||window.okxwallet.networkVersion||window.okxwallet._chainId),e}var t=function(){if(!e){var n=l((function(){return Promise.resolve(window.okxwallet.send("net_version").then(h)).then((function(n){e=n}))}),(function(){}));if(n&&n.then)return n.then((function(){}))}}();return t&&t.then?t.then(n):n()};if(!window.okxwallet)throw new s;var t=l((function(){return Promise.resolve(window.okxwallet.send("eth_chainId").then(h)).then((function(n){e=n}))}),(function(){}));return Promise.resolve(t&&t.then?t.then(n):n())}catch(e){return Promise.reject(e)}},r.getAccount=function(){try{var e,n=function(){function n(){return e||(e=h(window.okxwallet.send({method:"eth_accounts"}))[0]),e}var t=function(){if(!e){var n=l((function(){return Promise.resolve(window.okxwallet.enable().then((function(e){return h(e)[0]}))).then((function(n){e=n}))}),(function(){}));if(n&&n.then)return n.then((function(){}))}}();return t&&t.then?t.then(n):n()};if(!window.okxwallet)throw new s;var t=l((function(){return Promise.resolve(window.okxwallet.send("eth_accounts").then((function(e){return h(e)[0]}))).then((function(n){e=n}))}),(function(){}));return Promise.resolve(t&&t.then?t.then(n):n())}catch(e){return Promise.reject(e)}},r.deactivate=function(){window.okxwallet&&window.okxwallet.removeListener&&(window.okxwallet.removeListener("chainChanged",this.handleChainChanged),window.okxwallet.removeListener("accountsChanged",this.handleAccountsChanged),window.okxwallet.removeListener("close",this.handleClose),window.okxwallet.removeListener("networkChanged",this.handleNetworkChanged))},r.isAuthorized=function(){try{return window.okxwallet?Promise.resolve(l((function(){return Promise.resolve(window.okxwallet.send("eth_accounts").then((function(e){return h(e).length>0})))}),(function(){return!1}))):Promise.resolve(!1)}catch(e){return Promise.reject(e)}},o}(e.AbstractConnector);exports.NoEthereumProviderError=s,exports.OKXConnector=d,exports.UserRejectedRequestError=w;
//# sourceMappingURL=okx-connector.cjs.production.min.js.map
